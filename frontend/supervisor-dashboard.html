<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Supervisor Dashboard</title>
    <link rel="stylesheet" href="/supervisor-dashboard.css">

</head>

<body>

<div class="header">
    <h2>Supervisor Dashboard</h2>
    <a href="/logout" style="color:white;">Logout</a>
</div>

<div class="content">
    <div class="card">
        <h3>Student Submissions</h3>

        <table>
            <thead>
            <tr>
                <th>Student</th>
                <th>Document Title</th>
                <th>Type</th>
                <th>Status</th>
                <th>Feedback</th>
                <th>Actions</th>
            </tr>
            </thead>

            <tbody>
            <tr th:each="doc : ${documents}">
                <td th:text="${doc.student.username}">Student</td>
                <td th:text="${doc.title}">Title</td>
                <td th:text="${doc.type}">Type</td>

                <td>
                    <span th:if="${doc.status == 'APPROVED'}" class="status-approved">Approved</span>
                    <span th:if="${doc.status == 'REJECTED'}" class="status-rejected">Rejected</span>
                    <span th:if="${doc.status == 'REVISION'}" class="status-pending">Revision Required</span>
                    <span th:if="${doc.status == null}" class="status-pending">Pending</span>
                </td>

                <td th:text="${doc.feedback}">Feedback</td>

                <td>
                    <!-- Approve -->
                    <form th:action="@{'/supervisors/document/' + ${doc.id} + '/approve'}" method="post" style="display:inline;">
                        <button type="submit" class="approve">Approve</button>
                    </form>

                    <form th:action="@{'/supervisors/document/' + ${doc.id} + '/revision'}" method="post" style="display:inline;">
                        <textarea name="feedback" placeholder="Write feedback..." required></textarea>
                        <button type="submit" class="revision">Revision</button>
                    </form>

                </td>
            </tr>

            <tr th:if="${documents.isEmpty()}">
                <td colspan="6">No submissions yet.</td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>
